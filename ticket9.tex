\section{Ticket 9: представимость}
\label{sec-11}
\subsection{Функции, их представимость}
\label{sec-11-1}
Арифметическая функция -- это отображение $f: N_0^n \to N_0$ \\
Арифметическое отношение -- это $P \in N_0^n$ \\
Если $k \in N_0$, то $\overline k = 0'''''^\cdots$, где количество штрихов есть $k$.
\begin{itemize}
\item Арифметическое отношение $R \in N_0^n$ выразимо в ФА, если\\
$\exists a$ с $n$ свободными переменными:
$a(x_1,\dotsc, x_n)$, такая что
\begin{enumerate}
\item Eсли $R(k_1,\dotsc, k_n)$, то $\vdash a(\overline{k_1}, \dotsc, \overline{k_n})$
\item Eсли $\lnot R(k_1, \dotsc, k_n)$, то $\vdash \lnot a(\overline{k_1}, \dotsc, \overline{k_n})$
\end{enumerate}
\item $C_R$ - функция, равная $1$, если $R$, и равная $0$, если $\lnot R$
\item $\exists !y.\phi(y) = \exists y.\phi(y) \& \forall a\forall b(\phi(a) \& \phi(b) \to a = b)$
\item $f: N_0^n \to N_0$ представима в ФА, если $\exists a(x_1\dots x_{n+1})$, что
$\forall x_1\dotsc x_{n+1}:$
\begin{enumerate}
\item $f(x_1, \dotsc, x_n) = x_{n+1} \Leftrightarrow \vdash a(\overline{x_1}, \dotsc, \overline{x_{n+1}})$
\item $\exists !b(a(\overline{x_1}, \dotsc, \overline{x_n}, b))$
\end{enumerate}
\end{itemize}
\subsection{Теорема о связи представимости и выразимости}
\label{sec-11-2}
\begin{theorem}
$R$ выразимо $\Leftrightarrow$ $C_r$ представимо
\end{theorem}
\begin{proof}
$\Rightarrow$ $a$ выражает $R$\\
$(a \to (x_n₊_1=0')) \& (\lnot a \to (x_n₊_1=0))$
представляет $C_r$\\
По выразимости $R \vdash a$; тогда $\top\to a\to \top => a\to \top$\\
По 10i, перенесенной к нам $a \to (\lnot a \to \bot)$\\
правило с единственностью вроде понятно (хотя руками помахал, да)

$\Leftarrow$ $C_r \text{ представимо} \to R \text{ выразимо}$
Пусть представлять $C_r$ будет
$a(x_1, \dotsc, x_n,x_{n+1})$
Тогда определим, какая формула выражает $R$:
$a(\dotsc, 1)$
Из представимости:
\begin{itemize}
\item $\exists b.a(x_1\dots x_{n+1})$
\item $\forall x\forall y(a(\dots x) \& a(\dots  y) \to x = y)$
\item если $C_r(x_1\dots x_n) = 1$, то $\vdash a(x_1\dots x_n,1)$
\item если $C_r(\dots) = 0$, то $\vdash a(\dotsc, 0)$
\end{itemize}
Докажем выводимость
\begin{enumerate}
\item Покажем, что если $R(x_1\dots x_n)$, то $\vdash a(x_1\dots x_n, 1)$
Из представимости прямо ровно.
\item Покажем, что если $\lnot R(x_1\dots .x_n), то \vdash \lnot a(x_1\dots x_n, 1)$\\
По единственности

$\forall x\forall y(a(x_1\dots x_n, x) \& a(x_1\dots x_n, y) \to x = y)$\\
$a(x_1\dots x_n, 0) \& a(x_1\dots x_n, 1) \to (0 = 1)$ (спустя две акс. и 2 MP)\\
Делаем дедукцию\\
$a(x_1\dots x_n, 0) \& a(x_1\dots x_n, 1) \vdash \bot$\\
$a(x_1\dots x_n, 0) \& a(x_1\dots x_n, 1) \to a(x_1\dots x_n, 0)$\\
$a(x_1\dots x_n, 0)$\\
$\lnot a(x_1\dots x_n, 0)$ по представимости
$a(x_1\dots x_n, 0) \to (\lnot a(x_1\dots x_n, 0) \to \lnot a(x_1\dots x_n, 1))$ (10i в ИИВ, доказуема в предикатах)\\
$\lnot a(x_1\dots x_n, 1)$\\
Хотим $\lnot a(x_1\dots x_n, 1)$
\end{enumerate}
\end{proof}
\subsection{\texorpdfstring{$\beta$}{Бета}-функция Гёделя, китайская теорема об остатках}
\label{sec-11-3}
$\beta(b, c, i) = b \% (1 + c * (1 + i))$\\
Где $\%(a, b) = d$, что $\forall m . (d + m * b = a), m \geq 0, 0 \leq d \leq b$

\subsubsection{Китайская теорема об остатках}
\label{sec-11-3-1}
\begin{theorem}
$n_1\dots n_k$ - попарно взаимно простые целый числа\\
$r_1\dots r_k$ - любые целые числа, что $0 \leq r_1 < n_1$\\
Тогда: $\exists b \forall i  r_1 = b \% n_k$
\end{theorem}
\begin{proof}
Без доказательства
\end{proof}

\subsubsection{Гёделева \texorpdfstring{$\Gamma$}{Г}-последовательность}
\label{sec-11-3-2}
$\Gamma_1 = (i + 1) * c + 1$\\
$\Gamma(c) = 1 * c + 1, 2 * c + 1, 3 * c + 1, \ldots (n + 1) * c + 1$
\begin{theorem}
$\Gamma(c)$ подходит на роль $n_1 \ldots n_k$ в китайской теореме об остатках
\end{theorem}
\begin{proof}
Выделим последовательность размера $n$: $k_1 \ldots k_n$.\\
Чтобы это выполнялось возьмем $c = (max(k_1\dots k_n))!$
\begin{enumerate}
\item В $\Gamma$ любые два элемента попарно взаимно простые
\label{sec-11-3-2-1}
Пусть $\Gamma_1 \vdots \Gamma_j$ имеют общий делитель $p > 1$. Мы можем его разложить на простые множители и взять какой-нибудь простой (любое число раскладывается на простые множители).\\
Тогда $(\Gamma_1 - \Gamma_j) \divby p, (c * (i - j)) \divby p$. Заметим, что $\lnot (c \divby p)$, потому что иначе $\Gamma_1 = 1 + c * (i + 1) \divby p$ и $c * (i + 1) \divby p$, а они отличаются на единицу. Тогда $(i - j) \divby p$, но $c = m!$, $m > n$, а $i - j < n$, значит $c \divby p$.
\item Каждое $k_1 < Г_1$
\label{sec-11-3-2-2}
$k_1 \leq c < 1 + c * (i + 1) = \Gamma_1$
\end{enumerate}
\end{proof}
\subsubsection{Лемма о \texorpdfstring{$\beta$}{бета}-функции}
\label{sec-11-3-3}
\begin{lemma}
Увидим, что $\beta(b,c,i)$ считает остаток от деления $b$ на
$(i + 1) * c + 1$ - элемент Геделевой последовательности.
\end{lemma}
\begin{proof}
$<a_0 \ldots a_n> \in N \to \exists b \exists c (a_k=\beta(b,c,i))$ - $\beta$-функция кодирует
последовательность натуральных чисел и может
доставать по индексу $i$

$a_0 \ldots a_n$  - последовательность натуральных чисел
тогда существует такое $c$, что $\Gamma = 1 * c + 1, 2 * c + 1,\ldots$
если $c \geq max(a_0 \ldots a_n)$, то $a_k < (i + 1) * c + 1$\\
Но по свойству $\Gamma$ элементы попарно взаимно просты
тогда сравнения:\\
$a_0 \% (0+1)*c+1$\\
$a_1 \% (1+1)*c+1$\\
$\ldots$\\
$a_n \% (n + 1) * c + 1$\\
Имеют общее решение $b$ по китайской теореме об остатках, тогда $a_1 = b \% (i+1)*c + 1$\\
Но это и есть $\beta$-функция:\\
$a_i = \beta(b,c,i)$
\end{proof}
\subsubsection{Представимость \emph{\texorpdfstring{$\beta$}{бета}\emph{•}}-функции Гёделя в ФА}
\label{sec-11-3-4}
\begin{lemma}
$\beta$-функция представима в ФА отношением\\
$B(b,c,i,d) = \exists q((b = q * (1 + c * (i + 1)) + d) \& (d < 1 + c * (i + 1)))$
\end{lemma}
\begin{proof}
Пусть $1 + c * (i + 1) = z$\\
Докажем условия представимости:
\begin{enumerate}
\item Эквивалентность
\begin{enumerate}
\item $\beta(b,c,i) = d$, тогда $\vdash B(b,c,i,d)$\\
$b = z * (1 + c * (i + 1))$ (это и следующее - из леммы о $\beta$)\\
$d < 1 + c * (i + 1)$\\
$P \to Q \to P \& Q$\\
$P \& Q$\\
$P \& Q \to \exists q.(P \& Q) [z:= q]$\\
$\exists q.(P \& Q)$
\item Пусть $\vdash B(b,c,i,d)$, тогда\\
$\exists q.(P \& Q)$\\
Подберем такое $q$ (по лемме)\\
$P \& Q \to P$\\
$P \& Q \to Q$\\
$P$\\
$Q$\\
значит $\beta(b,c,i) = d$
\end{enumerate}
\item Единственность
Следует из леммы.
\end{enumerate}
\end{proof}
\subsection{Теорема о представимости рекурсивных функций Z, N, U}
\label{sec-11-4}
\begin{enumerate}
\item $Z$
$Z(a, b) = (b = 0)$
\begin{itemize}
\item $Z(a) = b$ верно, тогда $b = 0$\\
$b = 0$
\item $(b = 0)$\\
$b = 0$\\
Тогда $Z(0) = 0$, все ок
\item $\exists y.\phi(y) \& \forall a\forall b(\phi(a) \& \phi(b) \to a = b)$\\
\myworries{Тоже как-то не сложно}
\end{itemize}
\item $N$\\
$N(a, b) = (a = b')$
\begin{itemize}
\item $N(a) = b$, тогда $a = b'$\\
$a = b'$
\item $a = b'$, тогда\\
$N(a) = b$
\item \myworries{Третье не хочу}
\end{itemize}
\item $U_n^i$\\
$U_n^i(x_1 \dots x_n) = (x_1 = x_1) \& (x_2 = x_2) \& \dots  \& (x_{n+1} = x_i)$
\begin{itemize}
\item $U_n^i(..) = x_i$, тогда $x_{n+1} = x_i$\\
$x_1 = x_1$ доказывается\\
\dots\\
$x_n = x_n$ доказывается\\
$x_{n+1} = x_i$ по условию\\
объединяем все с помощью $\&$
\item $(x_1 = x_1) \& \dots$\\
Вытаскиваем каждый элемент и тогда видим, что
проекция делает ровно то, что должна.
\item $\exists q.(x_{n+1} = q)$\\
\myworries{ХЗ}
\item $\forall a\forall b(x(\dots a)\&x(\dots .b) \to a = b)$\\
Для конкретных $a$, $b$ обявляем $a = b - \top$, тогда выводим из него конъюнкцию и навешиваем два квантора
\end{itemize}
\end{enumerate}
\subsection{Теорема о представимости S}
\label{sec-11-5}
\begin{lemma}
Eсли $f$ и $g_1 \dots g_n$ представимы, то $S\template{f, g_1 \dots g_n}$ представима
\end{lemma}
\begin{proof}
Пусть $F$, $G_1 \dots G_n$ представляют их.\\
$S(a_1 \dots a_m, b)$ = $\exists b_1 \dots \exists b_n(G_1(a_1\dots a_n, b_1) \& \dots \& Gn(a_1 \dots a_m, b_n) \& F(b_1\dots b_n, b))$
\begin{itemize}
\item Пусть $S(a_1 \dots a_n) = b$, тогда существуют такие $b_1 \dots b_n$, что *каждый аргумент*\\
Поскольку $f, g_1 \dots g_n$ представимы, то доказуемы по представимости\\
$f(b_1 \dots b_n, b)$\\
$g_1(a_1 \dots a_n, b_1)$\\
$\dots$\\
$g_n(a_1 \dots a_n, b_n)$\\
$g_1 \& g₂ \& \dots  \& g_n \& f$ объединили \& -- "$P$"\\
"$P$" $\to \exists b_1."P[b_1:=b_1]"$ + M.P.\\
$\dots$\\
Ну и навесили кванторы, да.
\item Пусть верна формула с кванторами. Тогда она и есть уже то, что надо
\item \myworries{не могу, да и вообще нигде это свойство не доказывается}
\end{itemize}
\end{proof}
\subsection{Теорема о представимости R}
\label{sec-11-6}
\begin{theorem}
$R$ представима
\end{theorem}
\begin{proof}
Пусть $F$, $G$ представляют $f$, $g$. Тогда $R\template{f, g}$ представима.\\
$f$: $N^n \to N$, $g$: $N^{n+2} \to N$\\
$r$ - представление $R$:\\
$r(x_1 \dots x_n, k, a) =$
   $\exists b\exists c($
        $\exists k(\beta(b, c, 0, k) \& \phi(x_1\dots x_n, k))$
        $\& B(b, c, x_n₊_1, a)$\\
        $\& \forall k(k<x_n₊_1 \to \exists d\exists e(B(b,c,k,d)\&B(b,c,k',e)\&G(x_1\dots x_n,k,d,e))))$\\
Единственная возможность осознать -- внимательно прочесть формулу.\\
Тут $\beta$-функция используется в качестве функии отображения нашего шага вычисления рекурсии в результат, типа\\
$0 - F(\dots )$\\
$1 - G(\dots )$\\
$\dots $\\
$n - G(\dots )$
\end{proof}
\subsection{Теорема о представимости \texorpdfstring{$\mu$}{мю}}
\label{sec-11-7}
\begin{theorem}
$\mu$ представима
\end{theorem}
\begin{proof}
$f$: $N^{n+1} \to N $ представима $F$, тогда $\mu \template{f}$ представима $M$:\\
$M\template{F}(x_1 \dots x_{n+1}) = F(x_1 \dots x_n, x_{n+1}, 0) \& \forall y((y < x_{n+1}) \to \lnot F(x_1 \dots x_n, y, 0))$
\begin{itemize}
\item $\mu \template{f}(x_1 \dots x_n) = x_{n+1}$, тогда $x_{n+1}$ - минимальное $k$, такое что $f(x_1..x_n,k) = 0$\\
то есть имеем $F(x_1\dots x_n, x_n₊_1, 0)$\\
$\forall x.(k < x \to \lnot F(x_1 \dots x_n, k, 0))$\\
Просто объединим конъюнкцией
\item Обратно ей же и разъединим
\end{itemize}
\end{proof}